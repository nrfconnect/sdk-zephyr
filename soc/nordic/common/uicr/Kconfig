# Copyright (c) 2025 Nordic Semiconductor ASA
# SPDX-License-Identifier: Apache-2.0

config NRF_HALTIUM_GENERATE_UICR
	bool "Generate UICR file"
	depends on SOC_NRF54H20_CPUAPP
	default y
	help
	  Generate UICR HEX file.

if NRF_HALTIUM_GENERATE_UICR

config NRF_HALTIUM_UICR_PERIPHCONF
	bool "Initialize global domain peripherals"
	default y
	help
	  Generates a blob containing static global domain peripheral initialization
	  values extracted from the build artifacts, and configures UICR.PERIPHCONF
	  to point at the blob. The initialization values are then loaded ahead of
	  ahead of the application boot.

config NRF_HALTIUM_UICR_RECOVERY
	bool "Configure UICR RECOVERY field"
	help
	  Configure the UICR RECOVERY field to enable recovery firmware boot.
	  This should be enabled by the main application to configure recovery
	  firmware parameters. The recovery firmware itself does not need to
	  enable this option.

if NRF_HALTIUM_UICR_RECOVERY

choice NRF_HALTIUM_UICR_RECOVERY_PROCESSOR
	prompt "Recovery processor core"
	default NRF_HALTIUM_UICR_RECOVERY_PROCESSOR_APPLICATION
	help
	  Select the processor core for recovery firmware.

config NRF_HALTIUM_UICR_RECOVERY_PROCESSOR_APPLICATION
	bool "APPLICATION (cpuapp)"
	help
	  Boot the APPLICATION processor core for recovery firmware.

config NRF_HALTIUM_UICR_RECOVERY_PROCESSOR_RADIOCORE
	bool "RADIOCORE (cpurad)"
	help
	  Boot the RADIOCORE processor core for recovery firmware.

endchoice

config NRF_HALTIUM_UICR_RECOVERY_INITSVTOR
	hex "Recovery firmware INITSVTOR address"
	help
	  Initial value of the secure VTOR (Vector Table Offset Register)
	  for recovery firmware. This should match the recovery firmware's
	  memory partition address.

config NRF_HALTIUM_UICR_RECOVERY_SIZE4KB
	int "Recovery firmware size in 4KB blocks"
	range 1 1024
	help
	  Size of the recovery firmware partition in 4KB blocks.

config NRF_HALTIUM_UICR_RECOVERY_PERIPHCONF
	bool "Recovery firmware global domain peripheral configuration"
	help
	  Generates a blob containing static global domain peripheral initialization
	  values extracted from recovery firmware build artifacts, and configures
	  UICR.RECOVERY.PERIPHCONF to point at the blob. The initialization values
	  are then loaded ahead of the recovery firmware boot.

endif # NRF_HALTIUM_UICR_RECOVERY

endif

config NRF_PERIPHCONF_SECTION
	bool "Populate global peripheral initialization section"
	default y if SOC_NRF54H20_CPUAPP
	depends on LINKER_DEVNULL_SUPPORT
	imply LINKER_DEVNULL_MEMORY
	help
	  Include static global domain peripheral initialization values from the
	  build in a dedicated section in the devnull region.
