# SPDX-License-Identifier: Apache-2.0

# Remove after 3.7.0 is released
if(CONFIG_BT_RPMSG)
	message(FATAL_ERROR  "CONFIG_BT_RPMSG has been renamed to CONFIG_BT_HCI_IPC")
endif()

# Remove after 3.7.0 is released
if(CONFIG_BT_HCI_IPC)
  dt_chosen(chosen_hci_rpmsg PROPERTY "zephyr,bt-hci-rpmsg-ipc")
  if(DEFINED chosen_hci_rpmsg)
	message(FATAL_ERROR  "zephyr,bt-hci-rpmsg-ipc has been renamed to zephyr,bt-hci-ipc")
  endif()
endif()

zephyr_library_sources_ifdef(CONFIG_BT_ESP32       hci_esp32.c)
if(CONFIG_DT_HAS_ESPRESSIF_ESP32_BT_HCI_ENABLED)
  zephyr_blobs_verify(MODULE hal_espressif REQUIRED)
endif()
zephyr_library_sources_ifdef(CONFIG_BT_H4          h4.c)
zephyr_library_sources_ifdef(CONFIG_BT_H5          h5.c)
zephyr_library_sources_ifdef(CONFIG_BT_HCI_IPC     ipc.c)
if(CONFIG_BT_SPI)
    if ((CONFIG_DT_HAS_ST_HCI_SPI_V1_ENABLED) OR (CONFIG_DT_HAS_ST_HCI_SPI_V2_ENABLED))
       zephyr_library_sources(hci_spi_st.c)
    else()
      zephyr_library_sources(spi.c)
    endif()
endif()
zephyr_library_sources_ifdef(CONFIG_BT_CYW43XX   h4_ifx_cyw43xxx.c)
zephyr_library_sources_ifdef(CONFIG_BT_CYW208XX  hci_ifx_cyw208xx.c)

zephyr_library_sources_ifdef(CONFIG_BT_STM32_IPM   ipm_stm32wb.c)
zephyr_library_sources_ifdef(CONFIG_BT_STM32WBA    hci_stm32wba.c)
if(CONFIG_DT_HAS_ST_HCI_STM32WBA_ENABLED)
  zephyr_blobs_verify(MODULE hal_stm32 REQUIRED)
endif()
zephyr_library_sources_ifdef(CONFIG_BT_USERCHAN    userchan.c)
zephyr_library_sources_ifdef(CONFIG_BT_SILABS_HCI  slz_hci.c)
if(CONFIG_DT_HAS_SILABS_BT_HCI_ENABLED)
  zephyr_blobs_verify(MODULE hal_silabs REQUIRED)
endif()
zephyr_library_sources_ifdef(CONFIG_BT_PSOC6_BLESS hci_ifx_psoc6_bless.c)
if(CONFIG_DT_HAS_INFINEON_CAT1_BLESS_HCI_ENABLED)
  zephyr_blobs_verify(MODULE hal_infineon REQUIRED)
endif()
zephyr_library_sources_ifdef(CONFIG_SOC_NRF5340_CPUAPP nrf53_support.c)
zephyr_library_sources_ifdef(CONFIG_BT_AMBIQ_HCI   hci_ambiq.c apollox_blue.c)
zephyr_library_sources_ifdef(CONFIG_BT_DA1469X     hci_da1469x.c)
zephyr_library_sources_ifdef(CONFIG_BT_NXP         hci_nxp.c)
zephyr_library_sources_ifdef(CONFIG_BT_H4_NXP_CTLR hci_nxp_setup.c)
